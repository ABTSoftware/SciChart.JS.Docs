---
sidebar_position: 4
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

import ChartPreviewWrapper from "@site/src/components/ChartPreviewWrapper";
import customOrderExample1 from "!!raw-loader!./demo1";
import customOrderExample2 from "!!raw-loader!./demo2";
import customOrderExample3 from "!!raw-loader!./demo3";
import customOrderExample4 from "!!raw-loader!./demo4";
import customOrderExample5 from "!!raw-loader!./demo5";

# ðŸ”„ Ordered Rendering

The render order of an element on a 2D chart defines how it will be displayed while overlapping other chart elements.  
It is analogous to the definition of "z-index".

## Render Order of chart elements

Here we will describe some details on how series, annotations, labels, grid lines, sub-charts are handling render order.
This topic may require familiarity with the following points:

- SciChart has different [target canvases](/docs/2d-charts/annotations-api/html-annotation/#general-annotation-layer-types-overview) where the elements are rendered.
- [SubCharts API:blue_book:](https://www.scichart.com/documentation/js/current/WhatIsTheSubChartsAPI.html) allows putting multiple surfaces on a chart
- [Native Text API:blue_book:](https://www.scichart.com/documentation/js/current/webframe.html#Native%20Text%20Api.html) vs **Texture Text Rendering** (TODO add some info about this topic separately)

### Default behavior

The normal order of layering is

```
background > grid lines and bands > series > annotations > text labels
```

Thus, text labels usually are above other types of entities.

:::info
By default, elements of the same type are rendered in the insertion order.
:::
:::info
The default layers are defined in [EDefaultRenderLayer:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/enums/edefaultrenderlayer.html).  
:::

:::note
The order may differ depending on some configuration specifics.
:::

#### Series Render Order

Series render order depends on the insertion order into [renderableSeries:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/classes/scichartsurface.html#renderableseries) collection.
While it also may change when series are hovered or selected (this feature can be enabled with [SeriesSelectionModifier:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/classes/seriesselectionmodifier.html)).  
[Series Selection Example](https://demo.scichart.com/chart-series-selection)

<iframe src="https://demo.scichart.com/iframe/chart-series-selection" width="600" height="400"></iframe>

#### Annotations Render Order

Annotations expose [annotationLayer:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/annotationbase.html#annotationlayer) property,  
which allows them to be placed behind grid-lines/series or above them.  
(Refer to [EAnnotationLayer:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/enums/eannotationlayer.html))

:::note
Dom Annotations have limited support of the layering options due to their rendering specifics.
:::
[Example of Annotations on different Layers](https://demo.scichart.com/annotation-layers)

<iframe src="https://demo.scichart.com/iframe/annotation-layers" width="600" height="400"></iframe>

#### Native Text Render Order

Native Text rendering could be batched for performance optimization. However to make sure the text is rendered at the correct layer you may need to use immediate Native Text rendering.
Some contexts where you can force the immediate rendering are:

- [renderNativeAxisLabelsImmediately:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/classes/scichartsurface.html#rendernativeaxislabelsimmediately) for axis labels
- [drawImmediate:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/interfaces/inativetextannotationoptions.html#drawimmediate) on [NativeTextAnnotation:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/classes/nativetextannotation.html)

Also, native text can be used in other contexts such as annotations, data labels, titles, etc...

#### SubCharts Render Order

Sub-charts conform to insertion order when rendering, and the main (parent) surface is processed first by default.
This also means that the elements attached to the main surface are rendered before the entities on sub-charts.

#### Background rendering

A chart [background:blue_book:](https://www.scichart.com/documentation/js/current/typedoc/classes/scichartsurface.html#background) is rendered on a root `div` element [domChartRoot:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/scichartsurface.html#domchartroot),
while a sub-chart background is rendered with WebGl on the Render Context Canvas.  
Thus, a parent surface background is always rendered below everything else;  
And a sub-chart can use only a plain color as a background.

:::note
Both parent surfaces and sub-charts support transparent backgrounds.  
[Example of chart background styling:blue_book:](https://www.scichart.com/documentation/js/current/webframe.html#Chart%20Styling%20-%20Images%20in%20Background.html)  
[Example of isTransparent property on sub-charts:blue_book:](https://www.scichart.com/documentation/js/current/webframe.html#SubSurfaceTransparency.html)
:::

## Custom Order

SciChart allows changing the render order of some elements.

First of all, it is possible by setting the order of items within collections on a surface such as `renderableSeries`, `annotations`, `subCharts`.  
To do this dynamically, Use and `add` and `remove` methods on a collection.

Then, some elements (currently series and annotations) have methods for advanced control of the render order.  
The API is defined in [IOrderedRenderable:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/orderedrenderable.html)

### Ordered Renderables

SciChart allows setting a custom render order on instances that implement `IOrderedRenderable`.

#### Absolute order

The order can be set as a value via the [renderOrder:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/interfaces/iannotationbaseoptions.html#renderorder) constructor option (or dynamically via [setRenderOrder:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/interfaces/iorderedrenderable.html#setrenderorder)).

For example, in the following setup, we change the order of the first annotation so it is rendered on top of the second one, which is the opposite of the default behaviour.

<ChartPreviewWrapper jsContent={customOrderExample1} />

```ts {12} showLineNumbers file=./demo1.ts start=region_A_start end=region_A_end

```

#### Relative Order

Alternatively, an order could be set as an offset from another Ordered Renderable instance.

In this example, we demonstrate how to place an annotation on a layer between renderable series via [renderNextTo:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/interfaces/iannotationbaseoptions.html#rendernextto) option
(or [setRenderNextTo:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/annotationbase.html#setrendernextto) method).

<ChartPreviewWrapper jsContent={customOrderExample2} />

<Tabs>
  <TabItem value="ts" label="TS" default>
    ```ts {16} showLineNumbers file=./demo2.ts start=region_B_start end=region_B_end

    ```

  </TabItem>
  <TabItem value="js" label="JS">
    ```ts {13} showLineNumbers file=./demo2.js start=region_B_start end=region_B_end

    ```

  </TabItem>

</Tabs>

#### Customizing Render Layer

Setting a custom render layer allows to place an entity at a layer of different entity kinds, as well.

Here we will demonstrate how to place series at the background layer, so that grid lines are rendered above them.  
For that we can use [renderLayer:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/interfaces/ibaserenderableseriesoptions.html#renderlayer) or [setRenderLayer:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/baserenderableseries.html#setrenderlayer)

<ChartPreviewWrapper jsContent={customOrderExample5} />

```ts {2} showLineNumbers file=./demo5.ts start=region_B_start end=region_B_end

```

#### Surface Render Order

It is also possible to change the render order of an element to appear as if it was rendered on another sub-chart,
or to change the render order of a whole sub-chart

Let's consider the following setup:

<Tabs>
  <TabItem value="ts" label="TS" >

    ```js showLineNumbers file=./demo3.ts start=region_S_start end=region_S_end

    ```

  </TabItem>
  <TabItem value="js" label="JS" >
    ```ts showLineNumbers file=./demo3.js start=region_S_start end=region_S_end

    ```

  </TabItem>
</Tabs>

Then, to reorder the sub-charts, we can apply the [setSurfaceRenderOrder:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/scichartsurface.html#setsurfacerenderorder) method on a surface:

```ts {13} showLineNumbers file=./demo3.js start=region_A_start end=region_A_end

```

Result:

<ChartPreviewWrapper jsContent={customOrderExample3} />

Or to modify the render order only of the series from the first chart we can apply the [setSurfaceRenderOrder:blue_book:](https://www.scichart.com/documentation/js/v4/typedoc/classes/baserenderableseries.html#setsurfacerenderorder) method on them:

<Tabs>
    <TabItem value="ts" label="TS" default>
        ```ts {16} showLineNumbers file=./demo4.ts start=region_A_start end=region_A_end 
        ```
    </TabItem>

    <TabItem value="js" label="JS">
        ```js {13} showLineNumbers file=./demo4.js start=region_A_start end=region_A_end
        ```
    </TabItem>

</Tabs>

Result:

<ChartPreviewWrapper jsContent={customOrderExample4} />
